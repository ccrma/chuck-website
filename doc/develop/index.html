<html>
<head>
<title>ChucK - [Developer's Guide]</title>
</head>
<body bgcolor="#000000" text="#ffffff" vlink="9999ff" alink="ffffff" link="9999ff">
<font face="verdana" size="2">

<br />
<center>
<table border="0" width="720">
<tr><td>
<font face="verdana" size="2">
<center>
<font size="3">
<b>ChucK</b> : Developer's Guide
</font>
<br />
<br />

  <table bgcolor="#262626" border="0" cellpadding="1" cellspacing="0"><tr><td>
  <table width="100%" bgcolor="#020202" border="0" cellpadding="1" cellspacing="2">
  <tr>
  <td align="right"><font face="verdana" size="2">
  version:</td><td><font face="verdana" size="2">
  1.4.x.x (numchucks)
  <br />
  
  </font></td>
  </tr>
  </table></td></tr>
  </table>

<br />

<img width="400" src="http://soundlab.cs.princeton.edu/images/chuck_litsk03_11.jpg" />
<br />
<hr width="10%" />
current version of this document: http://chuck.cs.princeton.edu/doc/develop/
<br /><br />
join the ChucK 
<a href="../../community.html">Developer 
Mailng List</a>
<br /><br />
related: the ChucK Tutorial | Programmer's Guide | ChucK 
Home <br /><br />
<hr width="10%" />
<b>Introduction:</b>
<br /><br />
</center>
This guide describes the software architecture the ChucK compiler and 
virtual machine, as well as design and implementation ChucK, and outlines 
how it can be modified, improved, and extended, including:
<br />
<ol>
<li> modifying the source code
<li> writing chuck external plug-ins (.ckx files) from C/C++
<li> using ChucK implementation as a framework/reference for new real-time audio/graphics/multimedia programming languages and systems.
</ol>
<center>
<br />
<hr width="10%" />
<b>Overview:</b>
<br />
</center>

ChucK implementation consists of:
<ol>
<li> a full COMPILER for ChucK, an interpreted/byte-code procedural audio/graphics 
     programming language
<li> a VIRTUAL MACHINE that internally manages user-level shreds (ChucK threads).  A virtual 
     instruction set is defined for ChucK.
<li> a audio engine and set of audio unit generator (signal processing units)
<li> a real-time, on-the-fly programmable audio/multimedia system.
</ol>
The ChucK compiler and virtual machine runs in the same address space. (allowing for code to 
be added, modified, and removed during runtime)
<br /><br />

<center>
<hr width="10%" />
<b>Architecture</b>
(by source module):
</center>

<ul>
<li> chuck_main.cpp: the entry point for 'chuck', which is both the 
compiler and the VM.  this module accepts various options and multiple 
concurrent source files to run in parallel in the VM.  this module 
invokes the following.
<br /><br />
<li> <u>chuck.lex</u>: lexer specification - the lexer is generated by 
lex/flex.
<br /><br />
<li> <u>chuck.y</u>: ChucK grammar specification - the parser is 
generated by yacc/bison.
<br /><br />
<li> <u>chuck_absyn.(h|c)</u>: abstract syntax for the ChucK parse tree.  
For each source file, a corresponding syntax tree is constructed in the 
parser and passed (by chuck_main) to the type-checker.
<br /><br />
<li> <u>chuck_scan.(h|cpp)</u>: ChucK scanner.  traverses the 
abstract syntax tree in several passes, and resolves types.
<br /><br />
<li> <u>chuck_type.(h|cpp)</u>: ChucK type-checker.  traverses the 
abstract syntax tree, and assigns and validates types for each part of 
the tree.  If a semantic error is encountered, a message is generated and 
returned.  if a program type-checks, the output is returned to be passed 
to the code emitter.
<br /><br />
<li> <u>chuck_emit.(h|cpp)</u>: ChucK byte-code emitter.  if a program 
has made it this far, then it is type-checked.  the emitter traversed the 
type-checked syntax tree, and emits virtual ChucK VM instructions for 
each file into a shred (ChucK thread).  The instruction set is defined in 
chuck_instr.
<br /><br />
<li> <u>chuck_instr.(h|cpp)</u>: ChucK VM instruction set.  this contains 
the virtual instructions for the VM.  arithmetic, logical, memory, 
timing, and audio-specific instructions are all part of the instruction 
set.
<br /><br />
<li> <u>chuck_vm.(h|cpp)</u>: ChucK VM implementation, including the 
ChucK 'shreduler', and data/functions for manipulating ChucK 'shreds'.  
The VM is a strict interpreter over the ChucK instructions emitted in 
earlier stages.  It also cooperates with the ChucK shreduler for 
shreduling the concurrent shreds, which are user-level constructs.  
Additionally, the VM also coordinates with a real-time native audio 
engine and a native graphics engine (currently, this is a wrapper for a 
subset of the OpenGL API, available in ChucK, with all the timing 
benefits of the language).
<br /><br />
<li> <u>chuck_oo.(h|cpp)</u>: base classes and objects for the ChucK runtime
VM implementation
<br /><br />
<li> <u>chuck_lang.(h|cpp)</u>: base classes and objects for the ChucK runtime
language interface implementation
<br /><br />
<li> <u>digitalio_rtaudio.(h|cpp)</u>: abstraction layer to the real-time 
audio interface provided by the system.  ChucK works over OS X 
(CoreAudio), Linux (ALSA/OSS), and Windows/Cygwin (DirectSound).  
Currently, the implementation uses an audio library by Gary Scavone, 
called RtAudio, also open source.
<br /><br />
<li> <u>rtaudio.(h|cpp)</u>: Gary Scavone's audio library code for 
real-time audio I/O.
<br /><br />
<li> <u>chuck_dl.(h|cpp)</u>: ChucK Dynamic Linking module.  Externals 
(ckx files) can be loaded dynamically and invoked from the language.  
This allows for algorithms implemented in other languages (C/C++ etc.) to 
be used from ChucK.  This includes a interface-querying mechanism 
for determining types.
<br /><br />
<li> <u>chuck_ugen.(h|cpp)</u>: interface for audio processing units 
(called unit generators), which include oscillators, filters, envelopes, 
noise generators, etc...  this module defines data structures of unit 
generators and how to import them into the type system.
<br /><br />
<li> <u>ugen_*.(h|cpp)</u>: internal unit generator libraries (statically 
linked)
<br /><br />
<li> <u>ulib_*.(h|cpp)</u>: standard chuck library (stdlib, math etc...)
<br /><br />
</ul>

</font>
</td></tr>
</table>

<br />

<font size="1">
<hr width="15%" />
<a href="../../">chuck</a> |
<a href="http://soundlab.cs.princeton.edu/">soundlab</a> |
<a href="http://www.cs.princeton.edu/">cs</a> |
<a href="http://www.music.princeton.edu/">music</a> |
<a href="http://ccrma.stanford.edu/">ccrma</a>
<br />
<br />
</font>
</body>
</html>
